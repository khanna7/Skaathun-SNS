---
title: "GC/CT Modeling in San Diego"
output: html_notebook
---

## Introduction

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook containing code for our logistic regression models interwoven with narrative text to provide materials for the Methods and Results section of the manuscript. The computer code is also available in a public [GitHub repository](https://github.com/khanna7/Skaathun-SNS/). 

```{r, results='show', echo=TRUE, message=FALSE}
# Libraries ----------
rm(list=ls())
library(dplyr)

```


```{r, results='show', echo=TRUE, message=FALSE}
# Data  ----------
load("eda.RData")
```

The model below c

```{r, results='hide', echo=FALSE, message=FALSE}
# Prepare covariates
cov_dt <- 
  cbind.data.frame(
    #gender: very little variation in gender
    age = age,
    race = race_4cat,
    sex_pt_num_3m = sns$sex_part_num
  )

```

## Assessing network alcohol use as a GC/CT predictor

### Model Fit
```{r, results='show', echo=TRUE, message=FALSE}
# PFit alcohol logistic regression
alc_log_dt <- 
  cbind.data.frame(
    #gender: very little variation in gender
    age = age,
    race = race_4cat,
    sex_pt_num_3m = sns$sex_part_num,
    gc_or_ct_outcome = gc_or_ct_outcome,
    alc_net_prop = alc_net_prop
  )

alc_glm <- glm(data = alc_log_dt,
               formula = gc_or_ct_outcome ~ .,
               family = binomial
)

summary(alc_glm)
```

## Next Steps
Fit similar logistic regression models for:  
 - Marijuana use in networks    
 - Stimulant use in networks defined as crack/cocaine or meth use  
 - Compute bootstrapped confidence intervals as we did in NVL paper  